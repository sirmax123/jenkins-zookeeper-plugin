# zookeeper

## Introduction

Simple zookeper client.
Now implemented only 2 options: read zNode data and write data to zNode.

## Getting started


### Build
```
mvn install
```
### Deploy
On Jenkins master node copy plugin to the plugins folder

`cp target/zookeeper.hpi /var/lib/jenkins/plugins/zookeeper.hpi` 


### Use example
Simple jobe shows how to use plugin
```
def ZK_HOST = "192.168.1.223"

node() {
    def date = sh(script: "date", returnStdout: true)
    String newZnodeData = "SomeNewData " + date
    newZnodeData = newZnodeData.trim()

    println("Read data from the zNode")
    def dataFromZookeper = zookeperRead "zookeeperNodes": "192.168.1.223", "znode": "/MyFirstZnode"
    println("Got Data:" + dataFromZookeper)

    println("Write data to the zNode")
    zookeperWrite "zookeeperNodes": "192.168.1.223", "znode": "/MyFirstZnode", "znodeData": newZnodeData

    println("Read data written to the zNode")
    dataFromZookeper = zookeperRead "zookeeperNodes": "192.168.1.223", "znode": "/MyFirstZnode"
    dataFromZookeper = dataFromZookeper.toString().trim()
    println("Got data: " + dataFromZookeper + "Expected data is: " + newZnodeData)

    if (newZnodeData.toString().trim() != dataFromZookeper.trim()) {
        println("ERROR " + newZnodeData  + " != " + dataFromZookeper)
    } else {
        println("Got Expected Data" + newZnodeData  + " == " + dataFromZookeper)
    }
}
```

## LICENSE
(this section is autogenerated)
Licensed under MIT, see [LICENSE](LICENSE.md)

